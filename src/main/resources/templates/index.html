<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello JseedPanle!</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link href="style/font-awesome.min.css" rel="stylesheet"/>
    <link href="./style/jseedPanle.css" rel="stylesheet"/>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $(function () {
            $(".window").draggable();
        });
    </script>
</head>
<body>
<div class="header">
    <p>ğŸªå…³äº</p>
    <p>â±9æœˆ26æ—¥ æ˜ŸæœŸæ—¥ ä¸‹åˆ4ï¼š00</p>
    <p id="netInfo">âš¡ â†‘100k/s â†“2M/s</p>
</div>
<div class="container">

    <div class="ui-widget-content window">
        <p class="window-head">ç»ˆç«¯</p>
        <iframe id="browser" onhaschange="function x (){
            document.getElementById('draggable').innerText = document.getElementById('browser').src
        }" src="/terminal.html" class="window-body"></iframe>
    </div>

    <div class="ui-widget-content window ">
        <p class="window-head">æ–‡ä»¶æµè§ˆå™¨</p>
        <div class="window-body">
            <table class="table is-fullwidth">
                <tbody style="max-height: 600px;overflow-y: scroll">
                <tr th:each="file:${files}">
                    <td>
                        <i th:if="${file.isFile()}" class="fa fa-file "></i>
                        <i th:if="${file.isDirectory()}" class="fa fa-folder "></i>
                        <a href="#">
                            <span th:text="${file.name}"></span>
                            <span class="has-text-dark" th:if="${file.isFile()}"
                                  th:text="${file.length() / (1024 * 1024)} + 'M'"></span>

                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>


    <ul>
        <li>
            <p><img class="icon" src="svg/terminal.svg" alt=""></p>
            <p>system</p>
        </li>
        <li>
            <p><img class="icon" src="https://cdn.svgporn.com/logos/bash-icon.svg" alt=""></p>
            <p>system</p>
        </li>
    </ul>
</div>
<!--<section class="section" style="height: 100%">-->

<!--    <div class="container">-->

<!--        <div class="columns">-->
<!--            <div class="column">-->

<!--                <div>-->
<!--                    <a class="icon mx-4">-->
<!--                        <p>-->
<!--                        <img src="https://webix.com/demos/web-desktop/img/filemanager.png" alt="">-->
<!--                        </p>-->
<!--                        <p>document</p>-->
<!--                    </a>-->
<!--                    <a class="icon mx-4">-->
<!--                        <img src="https://webix.com/demos/web-desktop/img/filemanager.png" alt="">-->
<!--                    </a>-->
<!--                </div>-->

<!--                &lt;!&ndash;            <div class="notification is-danger">&ndash;&gt;-->
<!--                &lt;!&ndash;                <button class="delete"></button>&ndash;&gt;-->
<!--                &lt;!&ndash;                Lorem ipsum dolor sit amet, consectetur adipiscing elit lorem ipsum dolor sit amet, consectetur adipiscing elit&ndash;&gt;-->
<!--                &lt;!&ndash;            </div>&ndash;&gt;-->

<!--                &lt;!&ndash;            <article class="message is-info">&ndash;&gt;-->
<!--                &lt;!&ndash;                <div class="message-header">&ndash;&gt;-->
<!--                &lt;!&ndash;                    Info&ndash;&gt;-->
<!--                &lt;!&ndash;                    <button class="delete"></button>&ndash;&gt;-->
<!--                &lt;!&ndash;                </div>&ndash;&gt;-->
<!--                &lt;!&ndash;                <div class="message-body">&ndash;&gt;-->
<!--                &lt;!&ndash;                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque risus mi, tempus quis placerat ut, porta nec nulla. Vestibulum rhoncus ac ex sit amet fringilla. Nullam gravida purus diam, et dictum felis venenatis efficitur. Aenean ac eleifend lacus, in mollis lectus. Donec sodales, arcu et sollicitudin porttitor, tortor urna tempor ligula, id porttitor mi magna a neque. Donec dui urna, vehicula et sem eget, facilisis sodales sem.&ndash;&gt;-->
<!--                &lt;!&ndash;                </div>&ndash;&gt;-->
<!--                &lt;!&ndash;            </article>&ndash;&gt;-->
<!--            </div>-->
<!--            <div class="column">-->

<!--            </div>-->
<!--            <div class="column">-->
<!--    &lt;!&ndash;                <form class="box">&ndash;&gt;-->
<!--    &lt;!&ndash;                    <div class="field">&ndash;&gt;-->
<!--    &lt;!&ndash;                        <label class="label">ç™»å½•è´¦å·</label>&ndash;&gt;-->
<!--    &lt;!&ndash;                        <div class="control">&ndash;&gt;-->
<!--    &lt;!&ndash;                            <input class="input" type="email" placeholder="admin">&ndash;&gt;-->
<!--    &lt;!&ndash;                        </div>&ndash;&gt;-->
<!--    &lt;!&ndash;                    </div>&ndash;&gt;-->

<!--    &lt;!&ndash;                    <div class="field">&ndash;&gt;-->
<!--    &lt;!&ndash;                        <label class="label">å¯†ç </label>&ndash;&gt;-->
<!--    &lt;!&ndash;                        <div class="control">&ndash;&gt;-->
<!--    &lt;!&ndash;                            <input class="input" type="password" placeholder="********">&ndash;&gt;-->
<!--    &lt;!&ndash;                        </div>&ndash;&gt;-->
<!--    &lt;!&ndash;                    </div>&ndash;&gt;-->

<!--    &lt;!&ndash;                    <button class="button is-primary">å¯åŠ¨</button>&ndash;&gt;-->
<!--    &lt;!&ndash;                </form>&ndash;&gt;-->
<!--            </div>-->
<!--            <div class="column">-->
<!--&lt;!&ndash;                <progress class="progress is-small is-primary" max="100">15%</progress>&ndash;&gt;-->
<!--            </div>-->
<!--        </div>-->
<!--&lt;!&ndash;        <div class="buttons">&ndash;&gt;-->
<!--&lt;!&ndash;            <button class="button is-info">Info</button>&ndash;&gt;-->
<!--&lt;!&ndash;            <button class="button is-success">Success</button>&ndash;&gt;-->
<!--&lt;!&ndash;            <button class="button is-warning">Warning</button>&ndash;&gt;-->
<!--&lt;!&ndash;            <button class="button is-danger">Danger</button>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->

<!--    </div>-->
<!--</section>-->


<div style="box-shadow: #0000002e 1px 1px 7px 0;background: #0000004d!important;position: absolute;bottom: 40px;width: 40%; left: 30%;right: -30%"
     class=" card is-flex is-justify-content-center p-3">

    <a class="icon mx-3 is-large">
        <img src="svg/terminal.svg" alt="">
    </a>
    <a class="icon mx-3 is-large">
        <img src="https://cdn.svgporn.com/logos/nginx.svg" alt="">
    </a>
    <a class="icon mx-3 is-large">
        <img src="https://cdn.svgporn.com/logos/chrome.svg" alt="">
    </a>
    <!--          <footer class="card-footer">-->
    <!--              <a href="#" class="card-footer-item">Save</a>-->
    <!--              <a href="#" class="card-footer-item">Edit</a>-->
    <!--              <a href="#" class="card-footer-item">Delete</a>-->
    <!--          </footer>-->
</div>

<script>
    var socket;

    function openSocket() {
        if (typeof (WebSocket) == "undefined") {
            console.log("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWebSocket");
        } else {
            console.log("æ‚¨çš„æµè§ˆå™¨æ”¯æŒWebSocket");
            //å®ç°åŒ–WebSocketå¯¹è±¡ï¼ŒæŒ‡å®šè¦è¿æ¥çš„æœåŠ¡å™¨åœ°å€ä¸ç«¯å£  å»ºç«‹è¿æ¥
            var socketUrl = "http://localhost:8080/socket/netInfo";
            socketUrl = socketUrl.replace("https", "ws").replace("http", "ws");
            console.log(socketUrl);
            if (socket != null) {
                socket.close();
                socket = null;
            }
            socket = new WebSocket(socketUrl);
            //æ‰“å¼€äº‹ä»¶
            socket.onopen = function () {
                console.log("websocketå·²æ‰“å¼€");
            };
            //è·å¾—æ¶ˆæ¯äº‹ä»¶
            socket.onmessage = function (msg) {
                console.log(msg);
                //å‘ç°æ¶ˆæ¯è¿›å…¥    å¼€å§‹å¤„ç†å‰ç«¯è§¦å‘é€»è¾‘

                document.getElementById('netInfo').innerText = msg.data

                var weekUnit = new Array("æ—¥", "ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­");
                var weekNow = weekUnit[new Date().getDay()]
                console.log(weekNow)
            };
            //å…³é—­äº‹ä»¶
            socket.onclose = function () {
                console.log("websocketå·²å…³é—­");
            };
            //å‘ç”Ÿäº†é”™è¯¯äº‹ä»¶
            socket.onerror = function () {
                console.log("websocketå‘ç”Ÿäº†é”™è¯¯");
            }
        }
    }

    openSocket();
</script>
</body>
</html>
